<%= form_with(model: product, local: true, class: "col-md-6 offset-md-3 text-center" ) do |form| %>
  
  <div class="form-group col-md-12">
    <%= form.label :name %>
    <%= form.text_field :name, class: "form-control" %>
  </div>

  <div class="form-group col-md-12">
    <%= form.label :description %>
    <%= form.text_field :description, class: "form-control" %>
  </div>

  <div class="form-group col-md-12">
    <%= form.label :quantity %>
    <%= form.number_field :quantity, class: "form-control" %>
  </div>

  <div class="form-group col-md-12">
    <%= form.label :price %>
    <%= form.number_field :price, class: "form-control" %>
  </div>

  <div class="form-group col-md-12">
    <%= form.label :user %><br>
    <%= collection_select(:product, :user_id, User.all, :id, :first_name, {prompt: true}, {class: "custom-select"}) %><br>
    <%= form.label :category %><br>
    <%= collection_select(:product, :category_id, Category.all, :id, :name, {prompt: true}, {class: "custom-select"}) %><br>

    <%= fields_for :images, product.images do |image_fields| %>
      <%= image_fields.label :choose_image_to_upload %><br>
      <%= image_fields.file_field :images %>
      <%= image_fields.label :choose_image_to_upload %><br>
      <%= image_fields.file_field :images %>
    <% end %>
    
  </div>

  <% if action_name == "edit" %>
    <div>
      <% if form.object.images.attached? %>
        <% form.object.images.each do |img| %>
          <%= image_tag(thumbnail(img)) %>
          <%= link_to "Delete", product_image_path(img), method: :delete, data: {confirm: 'Are you sure?'} %>
        <% end %>
      <% end %>
    </div>
  <% end %>

  <br>

  <%= form.submit "#{action_name.capitalize} Product", class: "btn btn-primary" %>

<% end %>
